$(document).ready(function(){$("a.popup").on("click",function(){var t=$(this).attr("href");return $(".popupblock"+t).fadeIn("300"),!1}),$(".burger").on("click",function(){return $(".popupmenu").fadeIn(300),!1}),$(".popupmenu .close").on("click",function(){return $(this).parents(".popupmenu").fadeOut("300"),!1}),$(".popupblock .close").on("click",function(){return $(this).parents(".popupblock").fadeOut("300"),!1}),$(".cookies .close").on("click",function(){return $(this).parents(".cookies").fadeOut("300"),!1}),$(".cookies .ok-btn").on("click",function(){return $(this).parents(".cookies").fadeOut("300"),!1}),$(document).on("keyup",function(t){"Escape"==t.key&&$(".popupblock").fadeOut("300")}),$('input[type="name"]').on("input",function(){this.value.match(/[^а-яА-Яa-zA-Z]/s)&&(this.value=this.value.replace(/[^а-яА-Яa-zA-Z]/s,""))});var t=$('input[type="tel"]');function e(){var t,e=0,n=0,i=$(".calc-form .select .trafaret.active").attr("data-valIn"),a=$(".calc-form .select .trafaret.active").attr("data-valOut"),c=$(".calc-form .indot").val(),l=$(".calc-form .outdot").val(),s=$(".calc-form .select .components.active").attr("data-percent"),o=$(".calc-form .select .components.active").attr("data-overprice"),r=$(".calc-form .select .components.active").attr("data-wash"),d=$(".calc-form .select .quantity.active").attr("data-val");if(""!=c)var u=parseInt(c)*parseInt(i);else u=0;if(""!=l)var f=parseInt(l)*parseInt(a);else f=0;if($(".calc-form .select .trafaret").hasClass("active"))e=u+f;else e=0;(console.log("этап 1 "+e),$(".calc-form .select .component1").hasClass("active"))&&(n=parseInt(e/100*s)+e);if($(".calc-form .select .component2").hasClass("active"))n=(parseInt(e*o)+r)/100*s;console.log("этап 2 "+n),t=parseInt(n*d),0!=e&&0!=n&&0!=t&&$(".calc-form .result-block .val span").html(t),console.log("этап 3 "+t)}new Inputmask("+7 (999) 999 99-99").mask(t),$('label.file input[type="file"]').on("change",function(t){var e=t.target.files[0].name;$(this).parents(".form-inner").find(".file-item").show().find(".name").html(e)}),$(".file-item .delete").on("click",function(){$(this).parents(".file-item").hide().find(".name").html(""),$(this).parents(".form-inner").find(".file").find('input[type="file"]').val("")}),$(".select .current").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open").parents(".select").find(".list").fadeOut(300):$(this).addClass("open").parents(".select").find(".list").fadeIn(300)}),$(".select .list .option").on("click",function(){if($(this).not("active")){var t=$(this).html();$(this).parents(".list").find(".option").removeClass("active"),$(this).addClass("active").parents(".select").find(".current").removeClass("open").addClass("selected").html(t),$(this).parents(".list").fadeOut(300),$(this).parents(".select-field").find(".caption").show(300)}return!1}),$(document).mouseup(function(t){var e=$(".select .list"),n=$(".select .current");e.is(t.target)||0!==e.has(t.target).length||n.is(t.target)||0!==n.has(t.target).length||(e.fadeOut(300),n.removeClass("open"))}),$(document).mouseup(function(t){var e=$(".header__search");e.is(t.target)||0!==e.has(t.target).length||$(".header__search").removeClass("active").find(".search-result").hide(300)}),$(".calc-form .form-field input").on("input",function(){$(this).parents(".form-field").find(".caption").show(300)}),$(".tabs .tab-title").on("click",function(){if($(this).not(".active")){var t=$(this).attr("href");$(this).parents(".tabs-title").find(".tab-title").removeClass("active"),$(this).addClass("active"),$(this).parents(".tabs").find(".tab").hide(),$(this).parents(".tabs").find(".tab"+t).show()}return!1}),$(".calc-form .select .option").on("click",function(){e()}),$(".calc-form .form-field input").on("change",function(){e()}),$(".quantity-block .minus").on("click",function(){var t=$(this).parents(".quantity-block").find(".number").val();t>1&&(t=parseInt(t)-parseInt(1),$(this).parents(".quantity-block").find(".number").val(t))}),$(".quantity-block .plus").on("click",function(){var t=$(this).parents(".quantity-block").find(".number").val();t=parseInt(t)+parseInt(1),$(this).parents(".quantity-block").find(".number").val(t)}),$('input[type="search"]').on("input",function(){$(this).val().length>3?$(this).parents(".search").find(".clean").fadeIn(300):$(this).parents(".search").find(".clean").fadeOut(300)}),$(".search .clean").on("click",function(){$(this).fadeOut(300).parents(".search").find('input[type="search"]').val("")}),$(".account-sidebar__item[data-tab]").on("click",function(t){t.preventDefault();var e=$(this).attr("data-tab");$(".account-sidebar__item").removeClass("active"),$(this).addClass("active"),$(".account-panel").hide(),$('.account-panel[data-panel="'+e+'"]').show()}),$("#btn-change-password").on("click",function(){$("#profile-view-actions").hide(),$("#edit-profile-form").hide(),$("#password-form").slideDown(300)}),$("#btn-save-password").on("click",function(){$("#password-form").slideUp(300),$("#profile-view-actions").show(),$("#password-form").find("input").val(""),$("#popup-password-success").fadeIn(300)}),$("#btn-edit-profile").on("click",function(){$("#profile-view-actions").hide(),$("#password-form").hide(),$("#edit-profile-form").slideDown(300)}),$("#btn-cancel-edit").on("click",function(){$("#edit-profile-form").slideUp(300),$("#profile-view-actions").show()}),$("#btn-save-profile").on("click",function(){$("#edit-profile-form").slideUp(300),$("#profile-view-actions").show()}),$(document).on("click",".legal-entity__btn-edit",function(){var t=$(this).closest(".legal-entity");t.addClass("editing"),t.find(".legal-entity__edit-form").slideDown(300)}),$(document).on("click",".legal-entity__btn-cancel",function(){var t=$(this).closest(".legal-entity");t.removeClass("editing"),t.find(".legal-entity__edit-form").slideUp(300)}),$(document).on("click",".legal-entity__btn-save",function(){var t=$(this).closest(".legal-entity");t.removeClass("editing"),t.find(".legal-entity__edit-form").slideUp(300)});var n=null;$(document).on("click",".legal-entity__btn-delete",function(){n=$(this).closest(".legal-entity"),$("#popup-delete-confirm").fadeIn(300)}),$("#btn-confirm-delete").on("click",function(){$("#popup-delete-confirm").fadeOut(300),n&&(n.slideUp(300,function(){$(this).remove()}),n=null),setTimeout(function(){$("#popup-delete-success").fadeIn(300)},400)}),$("#btn-add-legal-entity").on("click",function(){$("#add-legal-entity-form").slideDown(300)}),$(document).on("click",".legal-entity__btn-cancel-add",function(){$("#add-legal-entity-form").slideUp(300),$("#add-legal-entity-form").find('input[type="text"]').val("")}),$(document).on("input change","#add-legal-entity-form input",function(){var t=$("#add-legal-entity-form"),e=!0;t.find(".legal-entity__fields input").each(function(){""===$(this).val().trim()&&(e=!1)});var n=!0;t.find('input[type="checkbox"]').each(function(){$(this).is(":checked")||(n=!1)});var i=t.find(".legal-entity__btn-add");e&&n?i.prop("disabled",!1).removeClass("btn-disabled"):i.prop("disabled",!0).addClass("btn-disabled")}),$(document).on("click",".legal-entity__btn-add",function(){if(!$(this).prop("disabled")){var t=$("#add-legal-entity-form"),e='<div class="legal-entity"><div class="legal-entity__header"><div class="legal-entity__name">'+t.find('input[name="org_name"]').val()+'</div><div class="legal-entity__controls"><button class="legal-entity__btn-edit" title="Редактировать"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7279 9.57629L14.3137 8.16207L5 17.4758V18.8901H6.41421L15.7279 9.57629ZM17.1421 8.16207L18.5563 6.74786L17.1421 5.33365L15.7279 6.74786L17.1421 8.16207ZM7.24264 20.8901H3V16.6474L16.435 3.21233C16.8256 2.8218 17.4587 2.8218 17.8492 3.21233L20.6777 6.04075C21.0682 6.43128 21.0682 7.06444 20.6777 7.45497L7.24264 20.8901Z" fill="black"/></svg></button><button class="legal-entity__btn-delete" title="Удалить"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 5C20 5.55228 19.5523 6 19 6H18.997L18.064 19.142C18.0281 19.6466 17.8023 20.1188 17.4321 20.4636C17.0619 20.8083 16.5749 20.9999 16.069 21H7.93C7.42414 20.9999 6.93707 20.8083 6.56688 20.4636C6.19669 20.1188 5.97093 19.6466 5.935 19.142L5.003 6H5C4.44772 6 4 5.55228 4 5C4 4.44772 4.44772 4 5 4H9C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4H19C19.5523 4 20 4.44772 20 5ZM7.003 6L7.931 19H16.069L16.997 6H7.003Z" fill="black"/></svg></button></div></div></div>';$("#legal-entities-list").append(e),t.slideUp(300),t.find('input[type="text"]').val(""),t.find('input[type="checkbox"]').prop("checked",!1),t.find(".legal-entity__btn-add").prop("disabled",!0).addClass("btn-disabled")}}),$(".profile-card__password-form .password .visible__text").on("click",function(){var t=$(this).siblings("input");"password"===t.attr("type")?t.attr("type","text"):t.attr("type","password"),$(this).toggleClass("active")}),$(".checkout-buyer-tab").on("click",function(){var t=$(this).attr("data-buyer");$(".checkout-buyer-tab").removeClass("active"),$(this).addClass("active"),$(".checkout-buyer-panel").hide(),$('.checkout-buyer-panel[data-buyer-panel="'+t+'"]').show()}),$(".checkout-delivery-tab").on("click",function(){var t=$(this).attr("data-delivery");$(".checkout-delivery-tab").removeClass("active"),$(this).addClass("active"),$(".checkout-delivery-panel").hide(),$('.checkout-delivery-panel[data-delivery-panel="'+t+'"]').show()}),$(".checkout-total__header").on("click",function(){var t=$(this).siblings(".checkout-total__details"),e=$(this).find(".checkout-total__toggle");t.slideToggle(300),e.toggleClass("open")}),$('.checkout-attach-btn input[type="file"]').on("change",function(t){if(t.target.files.length>0){var e=t.target.files[0].name,n=$(this).closest(".checkout-attachments").find(".checkout-attachment");n.find(".checkout-attachment__name").text(e),n.show()}}),$(document).on("click",".checkout-attachment__delete",function(){var t=$(this).closest(".checkout-attachments");$(this).closest(".checkout-attachment").hide().find(".checkout-attachment__name").text(""),t.find('input[type="file"]').val("")}),$(".checkout-submit").on("click",function(){$("#popup-checkout-success").fadeIn(300)}),$("#btn-back-to-account").on("click",function(){$("#popup-checkout-success").fadeOut(300),$('.account-sidebar__item[data-tab="profile"]').trigger("click")}),$(document).on("click",".history-details-toggle",function(t){t.preventDefault();var e=$(this).closest(".history-table__row").next(".history-table__detail");e.is(":visible")?e.slideUp(300):e.slideDown(300)}),$(document).on("click",".history-detail-close",function(t){t.preventDefault(),$(this).closest(".history-table__detail").slideUp(300)})});