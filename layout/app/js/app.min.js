$(document).ready(function(){$("a.popup").on("click",function(){var t=$(this).attr("href");return $(".popupblock"+t).fadeIn("300"),!1}),$(".burger").on("click",function(){return $(".popupmenu").fadeIn(300),!1}),$(".popupmenu .close").on("click",function(){return $(this).parents(".popupmenu").fadeOut("300"),!1}),$(".popupblock .close").on("click",function(){return $(this).parents(".popupblock").fadeOut("300"),!1}),$(".cookies .close").on("click",function(){return $(this).parents(".cookies").fadeOut("300"),!1}),$(".cookies .ok-btn").on("click",function(){return $(this).parents(".cookies").fadeOut("300"),!1}),$(document).on("keyup",function(t){"Escape"==t.key&&$(".popupblock").fadeOut("300")}),$('input[type="name"]').on("input",function(){this.value.match(/[^а-яА-Яa-zA-Z]/s)&&(this.value=this.value.replace(/[^а-яА-Яa-zA-Z]/s,""))});var t=$('input[type="tel"]');function e(){var t,e=0,n=0,a=$(".calc-form .select .trafaret.active").attr("data-valIn"),i=$(".calc-form .select .trafaret.active").attr("data-valOut"),s=$(".calc-form .indot").val(),c=$(".calc-form .outdot").val(),o=$(".calc-form .select .components.active").attr("data-percent"),r=$(".calc-form .select .components.active").attr("data-overprice"),l=$(".calc-form .select .components.active").attr("data-wash"),f=$(".calc-form .select .quantity.active").attr("data-val");if(""!=s)var p=parseInt(s)*parseInt(a);else p=0;if(""!=c)var u=parseInt(c)*parseInt(i);else u=0;if($(".calc-form .select .trafaret").hasClass("active"))e=p+u;else e=0;(console.log("этап 1 "+e),$(".calc-form .select .component1").hasClass("active"))&&(n=parseInt(e/100*o)+e);if($(".calc-form .select .component2").hasClass("active"))n=(parseInt(e*r)+l)/100*o;console.log("этап 2 "+n),t=parseInt(n*f),0!=e&&0!=n&&0!=t&&$(".calc-form .result-block .val span").html(t)}new Inputmask("+7 (999) 999 99-99").mask(t),$('label.file input[type="file"]').on("change",function(t){var e=t.target.files[0].name;$(this).parents(".form-inner").find(".file-item").show().find(".name").html(e)}),$(".file-item .delete").on("click",function(){$(this).parents(".file-item").hide().find(".name").html(""),$(this).parents(".form-inner").find(".file").find('input[type="file"]').val("")}),$(".select .current").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open").parents(".select").find(".list").fadeOut(300):$(this).addClass("open").parents(".select").find(".list").fadeIn(300)}),$(".select .list .option").on("click",function(){if($(this).not("active")){var t=$(this).html();$(this).parents(".list").find(".option").removeClass("active"),$(this).addClass("active").parents(".select").find(".current").removeClass("open").addClass("selected").html(t),$(this).parents(".list").fadeOut(300),$(this).parents(".select-field").find(".caption").show(300)}return!1}),$(document).mouseup(function(t){var e=$(".header__search");e.is(t.target)||0!==e.has(t.target).length||$(".header__search").removeClass("active").find(".search-result").hide(300)}),$(".calc-form .form-field input").on("input",function(){$(this).parents(".form-field").find(".caption").show(300)}),$(".tabs .tab-title").on("click",function(){if($(this).not(".active")){var t=$(this).attr("href");$(this).parents(".tabs-title").find(".tab-title").removeClass("active"),$(this).addClass("active"),$(this).parents(".tabs").find(".tab").hide(),$(this).parents(".tabs").find(".tab"+t).show()}return!1}),$(".calc-form .select .option").on("click",function(){e()}),$(".calc-form .form-field input").on("change",function(){e()}),$(".quantity-block .minus").on("click",function(){var t=$(this).parents(".quantity-block").find(".number").val();t>1&&(t=parseInt(t)-parseInt(1),$(this).parents(".quantity-block").find(".number").val(t))}),$(".quantity-block .plus").on("click",function(){var t=$(this).parents(".quantity-block").find(".number").val();t=parseInt(t)+parseInt(1),$(this).parents(".quantity-block").find(".number").val(t)}),$('input[type="search"]').on("input",function(){$(this).val().length>3?$(this).parents(".search").find(".clean").fadeIn(300):$(this).parents(".search").find(".clean").fadeOut(300)}),$(".search .clean").on("click",function(){$(this).fadeOut(300).parents(".search").find('input[type="search"]').val("")})});